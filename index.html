<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winions Meme Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>body { margin: 0; padding: 0; background: #000; }</style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
const { useState } = React;

function WinionsMemeGenerator() {
  const [isGenerating, setIsGenerating] = useState(false);
  const [generatedMeme, setGeneratedMeme] = useState(null);
  const [currentMeme, setCurrentMeme] = useState(null);

  const memeFormats = [
    {
      name: 'Distracted Boyfriend',
      prompt: 'Distracted boyfriend meme format on urban street. Three small humanoid digital figures rendered in retro CRT VHS glitch style. LEFT: angry girlfriend figure in red/pink glow with simple robe, glowing symbols on chest, featureless black face. CENTER: boyfriend figure in blue glow looking back over shoulder, simple cloak, chest symbols. RIGHT: attractive person in green/cyan glow. All figures have flowing robes, NO FEET VISIBLE, transmission artifacts. Heavy VHS texture, scanlines, chromatic aberration, datamosh static, phosphor glow, analog distortion. Black face, sometimes two glowing eyes. Lo-fi holographic broadcast aesthetic. Urban background with meme composition',
      texts: [
        { girlfriend: 'MY STABLE COIN', boyfriend: 'ME', other: 'RANDOM SHITCOIN' },
        { girlfriend: 'MY CURRENT WINION', boyfriend: 'ME', other: 'NEW WINION DROP' },
        { girlfriend: 'REAL LIFE', boyfriend: 'ME', other: 'THE METAVERSE' }
      ]
    },
    {
      name: 'Drake Hotline Bling',
      prompt: 'Drake meme two panel format. TOP PANEL: Single small humanoid digital figure in retro CRT VHS glitch style with hand raised rejecting, red/orange phosphor glow, simple robe with 2-3 glowing geometric symbols on chest, featureless black face with subtle glowing eyes, NO FEET, transmission artifact aesthetic. BOTTOM PANEL: Same figure pointing approvingly, green/cyan phosphor glow. Heavy VHS scanlines, chromatic aberration, analog noise, datamosh static, pixel drift, ghost trails. Lo-fi holographic broadcast, corrupted signal aesthetic. Two distinct horizontal panels, minimal background',
      texts: [
        { reject: 'SELLING WINIONS', approve: 'DIAMOND HANDS' },
        { reject: 'BORING NFTS', approve: 'WINIONS' },
        { reject: 'GOING OUTSIDE', approve: 'COLLECTING WINIONS' }
      ]
    },
    {
      name: 'Two Buttons',
      prompt: 'Two buttons meme format. TOP: Two large red buttons on control panel. BOTTOM: Single small humanoid digital figure in retro CRT VHS glitch style looking up stressed, blue/purple phosphor glow, simple triangular cloak with 2-4 glowing symbols on chest, featureless black face, anxious pose, NO FEET VISIBLE, transmission artifact. Heavy VHS scanlines, chromatic aberration, analog distortion, pixel noise, datamosh static, ghost trails, phosphor CRT glow. Lo-fi holographic broadcast aesthetic. Office/control room setting',
      texts: [
        { button1: 'SELL WINIONS', button2: 'HODL FOREVER' },
        { button1: 'BE PRODUCTIVE', button2: 'BUY MORE WINIONS' },
        { button1: 'SLEEP', button2: 'MINT WINIONS' }
      ]
    },
    {
      name: 'Woman Yelling at Cat',
      prompt: 'Woman yelling at cat meme split format. LEFT PANEL: Small humanoid digital figure at dinner table pointing and yelling, red/orange VHS glitch phosphor glow, simple robe with glowing chest symbols, aggressive pose, featureless black face. RIGHT PANEL: Confused small humanoid figure sitting at table with plate, cyan/green glow, bewildered expression, glowing symbols. Both figures rendered in retro CRT VHS style, NO FEET, transmission artifacts. Heavy scanlines, chromatic aberration, analog noise, datamosh static, phosphor glow. Lo-fi holographic broadcast. Restaurant setting, two panel composition',
      texts: [
        { left: 'YOU SPENT $5000', right: 'ON WINIONS?' },
        { left: 'STOP COLLECTING NFTS', right: 'BUT THEY\'RE WINIONS' },
        { left: 'GET A REAL HOBBY', right: 'WINIONS ARE REAL' }
      ]
    },
    {
      name: 'This Is Fine',
      prompt: 'This is fine meme. Single small humanoid digital figure in retro CRT VHS glitch style sitting calmly at table with coffee, orange/red phosphor glow, simple robe with 2-3 glowing symbols on chest, featureless black face with calm expression, small crown or hat, NO FEET. Room is on FIRE with flames in background but figure is serene. Heavy VHS scanlines, chromatic aberration, analog distortion, pixel noise, ghost trails, phosphor glow. Lo-fi holographic broadcast aesthetic. Burning room background, character sitting peacefully',
      texts: [
        { top: 'FLOOR PRICE DROPPING', bottom: 'THIS IS FINE' },
        { top: 'GAS FEES AT 500 GWEI', bottom: 'STILL MINTING' },
        { top: 'MARKET CRASHING', bottom: 'BUYING MORE WINIONS' }
      ]
    }
  ];

  const generateRandomMeme = async () => {
    setIsGenerating(true);
    try {
      // Pick random meme format
      const randomMeme = memeFormats[Math.floor(Math.random() * memeFormats.length)];
      
      // Pick random text variation for that format
      const randomText = randomMeme.texts[Math.floor(Math.random() * randomMeme.texts.length)];
      
      setCurrentMeme({ ...randomMeme, selectedText: randomText });

      // Generate image with AI using EXACT prompt
      const response = await fetch('/api/generate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
          prompt: randomMeme.prompt,
          style: 'meme'
        })
      });

      if (!response.ok) throw new Error('Failed to generate');
      
      const data = await response.json();
      const url = data.data[0]?.url;
      
      if (!url) throw new Error('No URL returned');
      
      setGeneratedMeme(url);
    } catch (error) {
      alert(error.message);
    } finally {
      setIsGenerating(false);
    }
  };

  return (
    <div className="min-h-screen bg-black text-white p-6">
      <div className="max-w-4xl mx-auto">
        <h1 className="text-5xl font-black mb-2 text-red-500 text-center">WINIONS MEME GENERATOR</h1>
        <p className="text-gray-400 text-center mb-8">AI generates random popular memes with Winions</p>

        <div className="space-y-6">
          <div className="bg-gray-900 rounded-lg border border-gray-800 min-h-[600px] flex items-center justify-center p-4">
            {generatedMeme && currentMeme ? (
              <div className="relative w-full">
                <img src={generatedMeme} alt="Winion Meme" className="w-full h-auto rounded" />
                <div className="absolute top-4 left-4 right-4 text-center">
                  <div className="text-4xl font-black text-white" style={{
                    textShadow: '3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000',
                    fontFamily: 'Impact, Arial Black, sans-serif'
                  }}>
                    {currentMeme.name.toUpperCase()}
                  </div>
                </div>
              </div>
            ) : (
              <div className="text-center p-8">
                <p className="text-gray-400 text-xl mb-2">Click below to generate</p>
                <p className="text-gray-600 text-sm">Random meme format + Random text</p>
              </div>
            )}
          </div>

          <button
            onClick={generateRandomMeme}
            disabled={isGenerating}
            className="w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-700 text-white font-black text-2xl py-6 px-8 rounded-lg transition-all"
          >
            {isGenerating ? '‚è≥ GENERATING...' : 'üé≤ GENERATE RANDOM MEME'}
          </button>

          {currentMeme && (
            <div className="bg-gray-900 border border-gray-800 rounded-lg p-6">
              <h3 className="text-xl font-bold text-red-500 mb-4">CURRENT MEME:</h3>
              <div className="space-y-2 text-gray-300">
                <p className="font-bold">Format: {currentMeme.name}</p>
                {Object.entries(currentMeme.selectedText).map(([key, value]) => (
                  <p key={key} className="text-sm">
                    <span className="text-gray-500">{key}:</span> {value}
                  </p>
                ))}
              </div>
            </div>
          )}

          <div className="text-center">
            <a 
              href="https://winions.xyz" 
              target="_blank"
              className="inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg"
            >
              WINIONS.XYZ
            </a>
          </div>
        </div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<WinionsMemeGenerator />);
    </script>
</body>
</html>
