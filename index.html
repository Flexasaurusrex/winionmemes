<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Winions Collage Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');
        
        body { 
            margin: 0; 
            padding: 0; 
            background: #000; 
            font-family: 'Courier Prime', monospace;
            touch-action: pan-y;
            overscroll-behavior: none;
        }
        
        .canvas-container { 
            touch-action: none; 
            position: relative;
            background: #000;
            border: 1px solid #333;
        }
        
        .winion-element { 
            position: absolute;
            cursor: move;
            user-select: none;
            touch-action: none;
            transition: transform 0.1s ease;
        }
        
        .winion-element:active {
            transform: scale(1.05);
        }
        
        .winion-element img {
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .text-overlay {
            font-family: 'Courier Prime', monospace;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
const { useState, useRef } = React;

function WinionsCollageGenerator() {
  const [elements, setElements] = useState([]);
  const [topText, setTopText] = useState('');
  const [bottomText, setBottomText] = useState('');
  const [draggedElement, setDraggedElement] = useState(null);
  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });
  const canvasRef = useRef(null);

  const winions = [
    '/winions/clay-min.gif',
    '/winions/frog-min.gif',
    '/winions/General hologram-min.gif',
    '/winions/gold general-min.gif',
    '/winions/gold-min.gif',
    '/winions/havoc-min.gif',
    '/winions/hellish-min.gif',
    '/winions/hologram-min.gif',
    '/winions/misfit-min.gif',
    '/winions/royal-min.gif',
    '/winions/shadow-min.gif',
    '/winions/spectrum-min.gif',
    '/winions/stencil-min.gif',
    '/winions/theory-min.gif',
    '/winions/unknow-min.gif'
  ];

  const memePhrases = [
    { top: 'WHEN THE', bottom: 'GAS FEES LOW' },
    { top: 'POV:', bottom: 'FOUND A WINION' },
    { top: 'NOBODY:', bottom: 'ME AT 3AM' },
    { top: 'THEY DON\'T KNOW', bottom: 'I OWN WINIONS' },
    { top: 'THE VIBES', bottom: 'IMMACULATE' },
    { top: 'RARE WINION', bottom: 'SPOTTED' },
    { top: 'NGMI', bottom: 'WITHOUT WINIONS' },
    { top: 'WEN', bottom: 'WINION' },
    { top: 'PROBABLY', bottom: 'NOTHING' },
    { top: 'DIAMOND HANDS', bottom: 'ACTIVATE' },
    { top: 'GM TO', bottom: 'WINION HOLDERS' },
    { top: 'JUST VIBING', bottom: 'IN METAVERSE' },
    { top: 'FLOOR PRICE', bottom: 'GOING CRAZY' },
    { top: 'ENTERING', bottom: 'WINION REALM' },
    { top: 'THIS IS', bottom: 'THE WAY' }
  ];

  const randomizeCollage = () => {
    const newElements = [];
    const numElements = Math.floor(Math.random() * 4) + 3; // 3-6 Winions
    
    for (let i = 0; i < numElements; i++) {
      const randomWinion = winions[Math.floor(Math.random() * winions.length)];
      const size = Math.floor(Math.random() * 100) + 80; // 80-180px
      const x = Math.floor(Math.random() * (window.innerWidth - size));
      const y = Math.floor(Math.random() * (500 - size)) + 100;
      const rotation = Math.floor(Math.random() * 40) - 20; // -20 to 20 degrees
      const zIndex = Math.floor(Math.random() * 100);
      
      newElements.push({
        id: Date.now() + i,
        src: randomWinion,
        x,
        y,
        size,
        rotation,
        zIndex
      });
    }
    
    setElements(newElements);
    
    // Random text
    const randomPhrase = memePhrases[Math.floor(Math.random() * memePhrases.length)];
    setTopText(randomPhrase.top);
    setBottomText(randomPhrase.bottom);
  };

  const addWinion = (src) => {
    const size = 120;
    const x = Math.floor(Math.random() * (window.innerWidth - size));
    const y = Math.floor(Math.random() * 400) + 100;
    
    setElements([...elements, {
      id: Date.now(),
      src,
      x,
      y,
      size,
      rotation: 0,
      zIndex: elements.length
    }]);
  };

  const handleMouseDown = (e, id) => {
    const element = elements.find(el => el.id === id);
    const rect = e.currentTarget.getBoundingClientRect();
    setDraggedElement(id);
    setDragOffset({
      x: e.clientX - rect.left,
      y: e.clientY - rect.top
    });
  };

  const handleTouchStart = (e, id) => {
    const element = elements.find(el => el.id === id);
    const touch = e.touches[0];
    const rect = e.currentTarget.getBoundingClientRect();
    setDraggedElement(id);
    setDragOffset({
      x: touch.clientX - rect.left,
      y: touch.clientY - rect.top
    });
  };

  const handleMouseMove = (e) => {
    if (!draggedElement) return;
    
    const canvasRect = canvasRef.current.getBoundingClientRect();
    const newX = e.clientX - canvasRect.left - dragOffset.x;
    const newY = e.clientY - canvasRect.top - dragOffset.y;
    
    setElements(elements.map(el => 
      el.id === draggedElement 
        ? { ...el, x: newX, y: newY }
        : el
    ));
  };

  const handleTouchMove = (e) => {
    if (!draggedElement) return;
    e.preventDefault();
    
    const touch = e.touches[0];
    const canvasRect = canvasRef.current.getBoundingClientRect();
    const newX = touch.clientX - canvasRect.left - dragOffset.x;
    const newY = touch.clientY - canvasRect.top - dragOffset.y;
    
    setElements(elements.map(el => 
      el.id === draggedElement 
        ? { ...el, x: newX, y: newY }
        : el
    ));
  };

  const handleMouseUp = () => {
    setDraggedElement(null);
  };

  const clearCanvas = () => {
    setElements([]);
    setTopText('');
    setBottomText('');
  };

  const exportImage = () => {
    html2canvas(canvasRef.current, {
      backgroundColor: '#000000',
      scale: 2
    }).then(canvas => {
      const link = document.createElement('a');
      link.download = 'winions-collage.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  };

  return (
    <div className="min-h-screen bg-black text-white">
      {/* Header */}
      <div className="border-b border-gray-800 p-4">
        <h1 className="text-2xl font-bold text-red-500 tracking-wider">WINIONS</h1>
        <p className="text-sm text-gray-500 mt-1">COLLAGE GENERATOR</p>
      </div>

      {/* Canvas */}
      <div 
        ref={canvasRef}
        className="canvas-container mx-auto relative"
        style={{ width: '100%', maxWidth: '800px', height: '600px', margin: '20px auto' }}
        onMouseMove={handleMouseMove}
        onMouseUp={handleMouseUp}
        onMouseLeave={handleMouseUp}
        onTouchMove={handleTouchMove}
        onTouchEnd={handleMouseUp}
      >
        {/* Winion Elements */}
        {elements.map(el => (
          <div
            key={el.id}
            className="winion-element"
            style={{
              left: `${el.x}px`,
              top: `${el.y}px`,
              width: `${el.size}px`,
              height: `${el.size}px`,
              transform: `rotate(${el.rotation}deg)`,
              zIndex: el.zIndex
            }}
            onMouseDown={(e) => handleMouseDown(e, el.id)}
            onTouchStart={(e) => handleTouchStart(e, el.id)}
          >
            <img src={el.src} alt="Winion" draggable={false} />
          </div>
        ))}

        {/* Text Overlays */}
        {topText && (
          <div className="text-overlay absolute top-4 left-0 right-0 text-center text-3xl text-red-500 z-50">
            {topText}
          </div>
        )}
        {bottomText && (
          <div className="text-overlay absolute bottom-4 left-0 right-0 text-center text-3xl text-red-500 z-50">
            {bottomText}
          </div>
        )}
      </div>

      {/* Controls */}
      <div className="max-w-4xl mx-auto p-4 space-y-4">
        {/* Main Buttons */}
        <div className="grid grid-cols-2 gap-3">
          <button
            onClick={randomizeCollage}
            className="border border-red-500 text-red-500 hover:bg-red-500 hover:text-black font-bold py-3 px-6 transition-all"
          >
            RANDOMIZE
          </button>
          <button
            onClick={exportImage}
            className="bg-red-500 text-black hover:bg-red-600 font-bold py-3 px-6 transition-all"
          >
            EXPORT
          </button>
        </div>

        <button
          onClick={clearCanvas}
          className="w-full border border-gray-700 text-gray-500 hover:border-red-500 hover:text-red-500 font-bold py-3 px-6 transition-all"
        >
          CLEAR
        </button>

        {/* Text Editor */}
        <div className="border border-gray-800 p-4">
          <h3 className="text-red-500 font-bold mb-3 tracking-wider">TEXT</h3>
          <div className="space-y-3">
            <input
              type="text"
              value={topText}
              onChange={(e) => setTopText(e.target.value)}
              placeholder="TOP TEXT"
              className="w-full bg-black border border-gray-700 text-red-500 px-4 py-2 focus:outline-none focus:border-red-500 font-mono"
            />
            <input
              type="text"
              value={bottomText}
              onChange={(e) => setBottomText(e.target.value)}
              placeholder="BOTTOM TEXT"
              className="w-full bg-black border border-gray-700 text-red-500 px-4 py-2 focus:outline-none focus:border-red-500 font-mono"
            />
          </div>
        </div>

        {/* Winion Selector */}
        <div className="border border-gray-800 p-4">
          <h3 className="text-red-500 font-bold mb-3 tracking-wider">ADD WINION</h3>
          <div className="grid grid-cols-5 gap-2">
            {winions.slice(0, 10).map((winion, idx) => (
              <button
                key={idx}
                onClick={() => addWinion(winion)}
                className="border border-gray-700 hover:border-red-500 p-2 transition-all"
              >
                <img src={winion} alt="Winion" className="w-full h-auto" />
              </button>
            ))}
          </div>
        </div>

        {/* Footer */}
        <div className="border border-gray-800 p-6 text-center">
          <p className="text-sm text-gray-500 mb-3">SHARE YOUR WINIONS</p>
          <a 
            href="https://winions.xyz" 
            target="_blank"
            className="inline-block bg-red-500 text-black hover:bg-red-600 font-bold py-2 px-8 transition-all"
          >
            WINIONS.XYZ
          </a>
        </div>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<WinionsCollageGenerator />);
    </script>
</body>
</html>
